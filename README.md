# PROTGPS

This repository contains code for the paper [Protein codes promote selective subcellular compartmentalization](https://www.biorxiv.org/content/10.1101/2024.04.15.589616v2.abstract).

## Setup

1. Install mamba (recommended) or conda

- download installer from: https://github.com/conda-forge/miniforge
- install and init

```
bash Miniforge-pypy3-Linux-x86_64.sh
```

2. Create environment 

```
mamba env create -f environment.yml
```
 
3. Activate


```
mamba activate protgps
```


### PROTGPS

1. Download model checkpoints from [zenodo](https://zenodo.org/records/14502581) and extract to `checkpoints/protgps`.


### [ESM2](https://github.com/facebookresearch/esm/)

```python
import torch
torch.hub.set_dir("checkpoints/esm2")
model, alphabet = torch.hub.load("facebookresearch/esm:main", "esm2_t6_8M_UR50D")
```
### [DR-BERT](https://github.com/qanastek/DrBERT)

```python
from transformers import AutoModel, AutoTokenizer

tokenizer = AutoTokenizer.from_pretrained("Dr-BERT/DrBERT-7GB", cache_dir="checkpoints/drbert")
model = AutoModel.from_pretrained("Dr-BERT/DrBERT-7GB", cache_dir="checkpoints/drbert")
```

5. To train model:
    
```
python scripts/dispatcher.py --config configs/protein_localization/full_prot_comp_pred.json --log_dir /path/to/logdir
```

6. To generate proteins:

```
cd esm/examples/lm-design
./generate_nucleolus.sh
./generate_nuclear_speckle.sh
```

### Analysis 

The [Analysis](notebook/Analysis.ipynb) script is located under notebook. Data used and generated by the script is located in the [zenodo repository](https://zenodo.org/records/14502581).


### Cite

```bibtex
@article{kilgore2024chemical,
  title={Chemical codes promote selective compartmentalization of proteins},
  author={Kilgore, Henry and Chinn, Itamar and Mikhael, Peter and Mitnikov, Ilan and Van Dongen, Catherine and Zylberberg, Guy and Afeyan, Lena and Banani, Salman and Wilson-Hawken, Susana and Lee, Tony and others},
  journal={bioRxiv},
  pages={2024--04},
  year={2024},
  publisher={Cold Spring Harbor Laboratory}
}
```
